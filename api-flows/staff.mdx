---
title: "Staff API Flow"
description: "This procedure describes the API flow for a restaurant staff member."
---

## Step 1. Order display

The order arrives at the restaurant's display system for the staff to view. The expeditor is responsible for picking up the new orders.

Send an HTTP request that filters for `Received` orders from the current day, along with table number (if applicable), status, priority, and dishes.

In this example, the date is Jan 1st, 2025.

### Request

```
curl -X GET "{serverURL}orders?filter=status.eq~Received|created_at.gte~2025-01-01&fields=table_number|status|priority|dish_ids"
```

### Response

The response includes the status code `200 OK`, along with the dishes that were ordered, the created/updated dates and times, and the customer name. In this example, any special requests would also be returned, for example if the customer noted that they have a food allergy.

```
"results": [
    {
      "id": "687da8369ce1fe0521c94b48",
      "table_number": null,
      "status": "Received",
      "priority": 5,
      "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
      ]
    },
    {
      "id": "687da8369ce1fe0521c94b4c",
      "table_number": 21,
      "status": "Received",
      "priority": 2,
      "dish_ids": [
        "687da8369ce1fe0521c94b3f",
        "687da8369ce1fe0521c94acd",
        "687da8369ce1fe0521c94ae4"
      ]
    },
```

## Step 2. Prioritization

In this step, the expeditor can change the priority from the default if needed (5 --\> lowest priority, 1 --\> highest priority), putting in an HTTP request to update an order if needed. In the request, change the priority.

### Request

```
curl -X PUT "{serverURL}orders/{order id}"
```

In the response body, change the priority to 1:

```
{
      "id": "687da8369ce1fe0521c94b48",
      "table_number": null,
      "status": "Received",
      "priority": 1,
      "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
      ]
}
```

### Response

If successful, the server responds with a `200 OK` status code and the response body contains the updated priority.

```
{
    "id": "687da8369ce1fe0521c94b48",
    "created_at": "2025-03-26T22:48:09.891Z",
    "updated_at": "2025-08-22T20:49:04.837Z",
    "scheduled_at": null,
    "table_number": null,
    "status": "Received",
    "priority": 1,
    "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
    ],
    "special_requests": null
}
```

## Step 3. Initiating preparation

The expeditor initiates the preparation of the order by changing the order's status.

To do so, send an HTTP request to update the order status from `Received` to `In Progress`.

### Request

```
curl -X PUT "{serverURL}orders/{id}
```

In the response body, change the status to In Progress.

```
 {
      "id": "687da8369ce1fe0521c94b48",
      "table_number": null,
      "status": "In Progress",
      "priority": 1,
      "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
      ]
}
```

### Response

The server responds with a `200 OK` status code, and the response body contains the updated status.

```
{
    "id": "687da8369ce1fe0521c94b48",
    "created_at": "2025-03-26T22:48:09.891Z",
    "updated_at": "2025-08-22T20:54:19.507Z",
    "scheduled_at": null,
    "table_number": null,
    "status": "In Progress",
    "priority": 1,
    "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
    ],
    "special_requests": null
}
```

## Step 4. Order preparation by stations

Each dish in the order is assigned to its station, and the station staff is alerted to work on their part of the order.

The client sends an HTTP request, filtering the response to only include dishes that belong to the appropriate station.

### Request

per class - want to filter the response to only include a specific station, query string to filter on the station e.g. hot & only want to retrieve certain fields like dish ID & name

```
curl -X GET "{serverURL}orders/{id}?fields=dish_ids|name|image_name"
```

Note: I could not figure out how to get the station filter to work\! Kept getting a "400 bad request" & unknown query parameter "filter".

### Response

If successful, the server returns a status code of `200 OK` . The response body contains all the dishes that are part of the order for the specified station.

```
{
  "id": "687da8369ce1fe0521c94b48",
  "name": "Maud",
  "dish_ids": [
    "687da8369ce1fe0521c94ac2",
    "687da8369ce1fe0521c94ab2"
  ]
}
```

## Step 5. Display dish ingredients

When the staff is ready to start preparing the dish, they need to know the ingredients.

The client sends a request to display the full ingredients for the dish.

### Request

The request includes the dish ID and asks to return the ingredient names. 

```
curl -X GET "{serverURL}dishes/{id}/ingredients?fields=name"
```

### Response

If successful, the response includes the status code `200 OK`, with the response body containing a list of the dish's ingredients (returns the id and name of each ingredient.

```
  "results": [
        {
            "id": "687da8369ce1fe0521c94a84",
            "name": "Oregano"
        },
        {
            "id": "687da8369ce1fe0521c94a85",
            "name": "Rosemary"
        },
        {
            "id": "687da8369ce1fe0521c94a9a",
            "name": "Cream"
        }
```

## Step 6. Ready for assembly

When a station has completed their part of the order, they change it to `Ready for Assembly` status. The expeditor is notified when all stations have marked their parts as complete.

When all parts are ready, the expeditor is notified via the kitchen process (not done via the API).

## Step 7. Order assembly

The expeditor assembles the order and updates the order status to On the Way.

The client sends an HTTP request to change the status from `In Progress` to `On the Way` (or `Ready for Pickup` if that applies).

from video - you can see example at 1.30 of the video where he pasted the command into the slide by mistake.

### Request

```
curl -X PUT "{serverURL}orders/{id}
```

In the request body, change the status to `Ready for Pickup`.

```
{
      "id": "687da8369ce1fe0521c94b48",
      "table_number": null,
      "status": "Ready for Pickup",
      "priority": 1,
      "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
      ]
```

### Response

If successful, the server responds with the `200 OK` status code and the response body shows the updated status.

```

    "id": "687da8369ce1fe0521c94b48",
    "created_at": "2025-03-26T22:48:09.891Z",
    "updated_at": "2025-08-22T21:33:13.060Z",
    "scheduled_at": null,
    "table_number": null,
    "status": "Ready for Pickup",
    "priority": 1,
    "dish_ids": [
        "687da8369ce1fe0521c94ac2",
        "687da8369ce1fe0521c94ab2"
    ],
    "special_requests": null
}
```